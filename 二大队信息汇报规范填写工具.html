<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二大队航空事件规范报告系统</title>
    <!-- PWA 元标签 -->
    <meta name="theme-color" content="#1e5799">
    <meta name="application-name" content="航空事件报告">
    <!-- 苹果移动设备特定元标签 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="航空事件报告">
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192x192.png">
    <!-- PWA 图标 -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512x512.png">
    <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0d3a6c, #1a5085);
            color: #333;
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }
        
        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            position: relative;
            border: 2px solid #2e6da4;
        }
        
        .logo {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, #1e5799, #207cca);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }
        
        h1 {
            color: #1e5799;
            font-size: 1.6rem;
            margin: 5px 0 0;
            padding: 0 50px;
            line-height: 1.3;
        }
        
        .subtitle {
            color: #4a6fa5;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }
        
        .status-bar {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .status-item {
            background: rgba(30, 87, 153, 0.1);
            padding: 6px 15px;
            border-radius: 18px;
            font-size: 0.9rem;
            color: #1e5799;
            display: flex;
            align-items: center;
            border: 1px solid rgba(46, 109, 164, 0.2);
        }
        
        main {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-section, .report-section {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            border: 1px solid #c5d7ed;
        }
        
        h2 {
            color: #1e5799;
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e0f0ff;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 22px;
        }
        
        .form-group {
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
        }
        
        .form-row {
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
        }
        
        label {
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 1.0rem;
            font-weight: 600;
            position: relative;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        label.required::after {
            content: "*";
            color: #e74c3c;
            font-weight: bold;
            margin-left: 2px;
            position: absolute;
            right: -12px;
            top: 2px;
        }
        
        select, input, textarea {
            width: 100%;
            background: #f8fbff;
            border: 2px solid #c5d9f0;
            border-radius: 8px;
            padding: 14px 16px;
            font-size: 1.02rem;
            transition: all 0.3s;
            margin-top: 2px;
        }
        
        textarea {
            min-height: 160px;
            resize: vertical;
        }
        
        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #1e5799;
            box-shadow: 0 0 0 3px rgba(30, 87, 153, 0.2);
        }
        
        .guidance-box {
            background: #e3f2fd;
            border-left: 4px solid #1e5799;
            padding: 18px;
            border-radius: 8px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-size: 0.98rem;
        }
        
        .points-title {
            font-weight: 700;
            margin-bottom: 12px;
            color: #1e5799;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.08rem;
            padding-top: 5px;
        }
        
        .points-list {
            padding-left: 22px;
            margin-bottom: 18px;
        }
        
        .points-list li {
            margin-bottom: 9px;
            color: #2c3e50;
            line-height: 1.5;
        }
        
        .explanation {
            background: #d8e9fb;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.96rem;
            color: #0f3d70;
            line-height: 1.5;
            margin-top: 10px;
        }

        .form-row-row {
            display: flex;
            gap: 12px;
        }
        
        .form-row-row > div {
            flex: 1;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            flex: 1;
            min-width: 140px;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.08rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn:active {
            transform: translateY(3px);
        }
        
        .btn-primary {
            background: linear-gradient(to right, #1e5799, #2e6da4);
            color: white;
            box-shadow: 0 5px 15px rgba(30, 87, 153, 0.4);
        }
        
        .btn-outline {
            background: white;
            border: 2px solid #1e5799;
            color: #1e5799;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .preview-box {
            background: #f8fbff;
            border-radius: 10px;
            padding: 25px;
            color: #0d3a6c;
            white-space: pre-wrap;
            line-height: 1.7;
            height: 380px;
            overflow-y: auto;
            font-size: 1.04rem;
            border: 2px solid #d6e6f7;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-top: 5px;
        }
        
        footer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            font-size: 0.9rem;
            color: #4a5568;
            margin-top: 20px;
            border: 1px solid #e2e9f2;
        }
        
        .hidden {
            display: none;
        }
        
        .toast {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(46, 109, 164, 0.95);
            color: white;
            padding: 14px 26px;
            border-radius: 30px;
            z-index: 1000;
            display: flex;
            gap: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            animation: fadeInOut 2s ease;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            10% { opacity: 1; transform: translateX(-50%) translateY(0); }
            90% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
        }
        
        #toast.hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-section, .report-section {
                padding: 18px;
            }
            
            .btn {
                flex: 100%;
            }
            
            header {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.4rem;
                padding: 0 40px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">✈</div>
            <h1>二大队航空事件规范报告系统</h1>
            <p class="subtitle">离线可用 · 即填即报 · 信息规范</p>
            <div class="status-bar">
                <div class="status-item">完全离线可用</div>
                <div class="status-item">事件类型分类</div>
                <div class="status-item">一键生成报告</div>
            </div>
        </header>
        
        <main>
            <div class="form-section" id="form-container">
                <h2>📝 事件信息填写</h2>
                
                <div class="form-grid">
                    <div>
                        <div class="form-row">
                            <label class="required">紧急程度</label>
                            <select id="urgency">
                                <option value="">请选择紧急程度</option>
                                <option value="紧急">紧急</option>
                                <option value="非紧急" selected>非紧急</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <label class="required">事发时间</label>
                            <input type="datetime-local" id="eventTime">
                        </div>
                        
                        <div class="form-row">
                            <label class="required">航班号</label>
                            <input type="text" id="flightNumber" placeholder="如：3U1234">
                        </div>
                        
                        <div class="form-row">
                            <label class="required">机型</label>
                            <select id="aircraftModel">
                                <option value="">请选择机型</option>
                                <option value="A319-133" selected>A319-133</option>
                                <option value="A320-211">A320-211</option>
                                <option value="A320-232">A320-232</option>
                                <option value="A320-271">A320-271</option>
                                <option value="A321-211">A321-211</option>
                                <option value="A321-271">A321-271</option>
                                <option value="其他">其他</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <label class="required">机号</label>
                            <input type="text" id="aircraftReg" placeholder="如：B-1234">
                        </div>
                        
                        <div class="form-row-row">
                            <div>
                                <label class="required">起飞地</label>
                                <input type="text" id="departure" placeholder="机场代码">
                            </div>
                            <div>
                                <label class="required">降落地</label>
                                <input type="text" id="arrival" placeholder="机场代码">
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-row">
                            <label class="required">左座</label>
                            <input type="text" id="leftseat" placeholder="姓名/角色">
                        </div>
                        
                        <div class="form-row">
                            <label class="required">右座</label>
                            <input type="text" id="rightseat" placeholder="姓名/角色">
                        </div>
                        
                        <div class="form-row">
                            <label>第三成员</label>
                            <input type="text" id="third" placeholder="姓名">
                        </div>
                        
                        <div class="form-row">
                            <label>第四成员</label>
                            <input type="text" id="fourth" placeholder="姓名">
                        </div>
                        
                        <div class="form-row">
                            <label class="required">责任机长</label>
                            <input type="text" id="pic" placeholder="姓名">
                        </div>
                        
                        <div class="form-row">
                            <label class="required">事件类型</label>
                            <select id="eventType" onchange="showEventGuidance()">
                                <option value="">-- 请选择事件类型 --</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <label class="required">汇报值班干部</label>
                            <select id="leader">
                                <option value="">请选择</option>
                                <option value="是">是</option>
                                <option value="否">否</option>
                                <option value="稍后汇报" selected>稍后汇报</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <label class="required">填报SQMS</label>
                            <select id="sqms">
                                <option value="">请选择</option>
                                <option value="是">是</option>
                                <option value="否">否</option>
                                <option value="稍后填报" selected>稍后填报</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <label class="required">事件描述</label>
                    <textarea id="eventDetails" placeholder="请根据事件类型要点，详细描述事件经过、处置措施和相关细节..."></textarea>
                </div>
                
                <div class="form-row" id="guidanceSection">
                    <div class="guidance-box" id="eventGuidance">
                        <p style="text-align: center; color: #666;">请选择事件类型查看填写要点</p>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="btn btn-primary" onclick="generateReport()">
                        📄 生成事件报告
                    </button>
                    <button class="btn btn-outline" onclick="clearForm()">
                        🧹 清空表单
                    </button>
                </div>
            </div>
            
            <div class="report-section hidden" id="report-container">
                <h2>📄 事件报告预览</h2>
                <div class="preview-box" id="reportOutput">
                    <!-- 生成的报告将显示在这里 -->
                </div>
                <div class="buttons">
                    <button class="btn btn-primary" onclick="copyToClipboard()">
                        📋 复制报告内容
                    </button>
                    <button class="btn btn-outline" onclick="backToForm()">
                        ↩️ 返回修改
                    </button>
                </div>
            </div>
        </main>
        
        <footer>
            <p><strong>二大队航空事件规范报告系统 - 离线手机版</strong></p>
            <p>无需联网使用 | 数据仅存储于设备本地 | 版本 1.3.0</p>
            <p>完整事件类型库 | 65种规范化场景</p>
        </footer>
    </div>

    <div id="toast" class="toast hidden"></div>

    <script>
        // 完整事件类型数据库（65种标准事件类型）
        const eventTypes = [
            {
                id: "acas",
                name: "ACAS（TCAS）告警",
                points: [
                    "飞行阶段",
                    "告警触发前/期间/之后飞机的飞行动态",
                    "告警类型和持续时间",
                    "两机间隔情况",
                    "告警前空管指令（如涉及）",
                    "天气情况",
                    "机组处置情况",
                    "空管处置情况"
                ],
                explanation: ""
            },
            {
                id: "near_separation",
                name: "临近管制间隔",
                points: [
                    "飞行任务及动态",
                    "冲突发生背景及解脱过程",
                    "临近管制间隔情况",
                    "飞行阶段",
                    "天气条件",
                    "机载相关设备的工作情况",
                    "事件发生的影响因素",
                    "机组处置情况",
                    "空管处置情况"
                ],
                explanation: "\"临近管制间隔\"是指空中航空器之间的纵向间隔、侧向间隔、垂直间隔接近但不小于规定间隔的情况。"
            },
            {
                id: "less_separation",
                name: "小于间隔",
                points: [
                    "飞行任务及动态",
                    "冲突发生背景及解脱过程",
                    "最小间隔情况",
                    "飞行阶段",
                    "天气条件",
                    "机载相关设备的工作情况",
                    "事件发生的影响因素",
                    "机组处置情况",
                    "空管处置情况"
                ],
                explanation: "\"小于间隔\"是指空中航空器之间的纵向间隔、侧向间隔、垂直间隔同时小于规定间隔的情况。"
            },
            {
                id: "cfit",
                name: "可控飞行撞地/障碍物",
                points: [
                    "机组工作情况",
                    "告警情况",
                    "周围环境",
                    "天气情况",
                    "自动驾驶仪和自动油门工作情况",
                    "机组处置情况",
                    "空管处置情况"
                ],
                explanation: "\"可控飞行撞地\"（CFIT）是指航空器可由飞行员正常控制，但因为一些失误而撞上地面、障碍物（树、电线、电线杆、电缆、天线杆等）或水面坠毁，包含触发地形警告的情况。航空器在飞行中失控而撞地的情况应当归类为\"失控\"。"
            },
            {
                id: "low_fuel",
                name: "低于最低油量",
                points: [
                    "是否申请优先处置",
                    "宣布最低油量/燃油紧急状况的原因",
                    "宣布最低油量/燃油紧急状况时的油量",
                    "落地剩余油量",
                    "实际着陆机场",
                    "燃油计划与加油情况",
                    "天气情况",
                    "可选备降场情况",
                    "机组处置情况",
                    "空管处置情况"
                ],
                explanation: "\"低于最低油量\"包含需要宣布\"最低油量\"和\"燃油紧急状况\"的情况。"
            },
            {
                id: "fuel_imbalance",
                name: "燃油不平衡",
                points: [
                    "不平衡警告发生时高度",
                    "警告持续时间",
                    "左右油箱油量差值",
                    "左右油箱油量",
                    "故障情况",
                    "机组处置情况"
                ],
                explanation: "飞行中两侧机翼油箱实际燃油差值大于该机型手册中对应阶段允许的燃油不平衡限制值，或需要机组使用非正常程序处理燃油的情况。因燃油系统故障造成的显示错误情况除外"
            },
            {
                id: "loss_of_control",
                name: "失控/失速",
                points: [
                    "触发失速警告时航空器状态",
                    "警告持续时间",
                    "最大迎角",
                    "机组处置情况"
                ],
                explanation: "飞行中，航空器失去控制；进入紧急盘旋、飘摆、失速状态（特定训练科目除外）；出现失速警告、抖杆或自动保护。"
            },
            {
                id: "control_difficulty",
                name: "操纵困难",
                points: [
                    "操纵困难的表现"
                ],
                explanation: "\"操纵困难\"是指导致航空器操纵困难的系统故障、部件脱落或卡阻、天气现象、飞行超出批准的飞行包线等。"
            },
            {
                id: "overspeed",
                name: "超速",
                points: [
                    "超速类型",
                    "速度限制",
                    "实际速度",
                    "后续影响",
                    "风向风速",
                    "超速持续时间",
                    "机组处置情况"
                ],
                explanation: "超过本机型的速度限制值，如超过襟/缝翼限制速度、起落架收放超过限制速度、超轮速等。"
            },
            {
                id: "lost_direction",
                name: "迷航/偏航",
                points: [
                    "偏离时刻",
                    "飞行高度",
                    "计划/指令航线",
                    "迷失/偏离的路线",
                    "偏离的最大距离",
                    "是否与其他航空器发生冲突",
                    "迷航/偏航原因",
                    "管制指挥情况",
                    "机组处置情况",
                    "天气状况"
                ],
                explanation: "包含偏离指定航线（迹）或航路中心线超过规定值的情况。以发现偏离后管制与机组之间建立联系时的最大偏离距离为准。"
            },
            {
                id: "below_safety_altitude",
                name: "低于/未保持安全高度",
                points: [
                    "实际高度",
                    "扇区安全高度",
                    "近地警告类型",
                    "近地警告原因",
                    "对其他航空器的影响",
                    "机组处置情况",
                    "空管处置情况",
                    "天气情况",
                    "下降率"
                ],
                explanation: "包含航空器低于安全高度和因天气或系统故障等原因不能保持安全高度的情况。低于安全高度中触发地形警告的事件，归类为\"地形警告\"。"
            },
            {
                id: "deviation_attitude_altitude",
                name: "偏离姿态/高度",
                points: [
                    "事件发生高度",
                    "异常姿态/高度数据",
                    "偏离持续时间",
                    "偏离的原因",
                    "对其他航空器的影响",
                    "机组处置情况",
                    "空管处置情况"
                ],
                explanation: "偏离姿态是指航空器俯仰角超过+25°或-10°、坡度超过45°或触发大坡度语音警告；偏离高度是指航空器偏离指定的高度60米以上的情况。"
            },
            {
                id: "bird_strike",
                name: "鸟击",
                points: [
                    "鸟击高度",
                    "鸟的数量",
                    "鸟击部位",
                    "鸟击时间",
                    "鸟击地点",
                    "使用的跑道（如涉及）",
                    "残留物情况（如有）",
                    "损伤情况",
                    "起降阶段鸟击是否通报管制",
                    "鸟击是否通报机务"
                ],
                explanation: "在航空器上发现鸟击（含蝙蝠）留下的血迹、羽毛、皮肤、肌肉或肢体等残留物。"
            },
            {
                id: "crew_incapacity",
                name: "机组失能/发病",
                points: [
                    "失能或者发病的具体人员信息",
                    "失能或者发病的原因",
                    "机组的体检情况",
                    "机组病例",
                    "机组病史",
                    "机组处置情况",
                    "对后续航班的影响"
                ],
                explanation: "飞行机组成员或客舱乘务员因受伤、患病、疲劳、酒精、食物中毒或药物的影响而无法履行其职责"
            },
            {
                id: "depressurization",
                name: "失压/紧急下降",
                points: [
                    "飞行高度",
                    "座舱高度",
                    "座舱高度告警情况",
                    "旅客氧气面罩释放情况",
                    "航空器当时的电气情况",
                    "是否宣布紧急情况",
                    "机组和旅客是否使用氧气",
                    "机组处置情况",
                    "空管处置情况",
                    "紧急下降后的改平高度"
                ],
                explanation: "出现座舱高度警告、座舱高度达到该运行阶段应当触发座舱高度警告的条件、座舱高度达到客舱氧气面罩自动脱落的情况。航空器增压异常导致氧气面罩脱落或需改变高度"
            },
            {
                id: "cabincockpit_event",
                name: "其他驾驶舱/客舱事件",
                points: [
                    "事件的起因",
                    "对航班后续运行产生的影响",
                    "机组处置情况"
                ],
                explanation: "客舱内设备、行李、其他物品滑出或其他原因（旅客自身原因除外）造成人员受伤；误操作导致氧气面罩脱落。旅客生病导致宣布紧急状态。驾驶舱、客舱中有异味、粉尘等，若是起火冒烟引起，归为\"航空器（内）起火/冒烟/火警\""
            },
            {
                id: "communication_loss",
                name: "通信中断",
                points: [
                    "发生管制区域",
                    "通信中断起、止时间及中断时长",
                    "有无造成其他航班避让",
                    "机组处置情况",
                    "空管处置情况",
                    "飞行阶段",
                    "通信中断的原因"
                ],
                explanation: "陆空通信双向联系中断是指空管单位和飞行机组之间无法通过经局方批准使用的VHF、HF语音通信或CPDLC提供和接收有效的空中交通服务，包含但不限于因通信设备失效、使用错误的通信频率或人为原因（如语音通信音量调小、睡岗等）导致发送和接收通信中断"
            },
            {
                id: "rejected_takeoff",
                name: "中断起飞",
                points: [
                    "中断起飞操纵时的实际速度",
                    "V1",
                    "中断起飞的原因",
                    "最大速度",
                    "滑跑距离"
                ],
                explanation: "由于机械故障或其他原因造成航空器中断起飞的事件"
            },
            {
                id: "hard_landing",
                name: "重着陆",
                points: [
                    "垂直载荷限制值大小",
                    "最大垂直载荷（G值）",
                    "接地前的下降率",
                    "使用跑道",
                    "航空器着陆姿态",
                    "天气情况",
                    "着陆重量",
                    "使用的进近程序"
                ],
                explanation: "航空器在着陆时垂直过载超过下列标准或该机型其他过载限制"
            },
            {
                id: "overweight_landing",
                name: "超重着陆",
                points: [
                    "实际着陆重量",
                    "最大允许着陆重量",
                    "跑道受损情况",
                    "航空器检查情况",
                    "垂直载荷",
                    "天气情况",
                    "超重着陆的原因"
                ],
                explanation: "航空器实际着陆重量超过最大允许着陆重量"
            },
            {
                id: "tailstrike",
                name: "擦尾/擦发动机/擦翼尖/擦机腹",
                points: [
                    "航空器擦地部位",
                    "航空器擦地前后姿态",
                    "天气条件",
                    "事件发生的影响因素",
                    "有无告警",
                    "机组是否感知",
                    "损伤情况",
                    "放行情况及依据",
                    "使用跑道",
                    "使用的进近程序"
                ],
                explanation: "起落架机轮（滑撬、尾环、浮筒）之外的任何部位触地"
            },
            {
                id: "gear_up_landing",
                name: "未放/部分起落架着陆",
                points: [
                    "接地速度、角度、位置等情况",
                    "接地前的应急措施",
                    "未放起落架或部分起落架着陆的原因",
                    "机组处置情况"
                ],
                explanation: "任一起落架收回着陆"
            },
            {
                id: "runway_excursion",
                name: "冲/偏出跑道",
                points: [
                    "天气状况",
                    "使用跑道和道面状况",
                    "是否实施紧急撤离，如是，紧急撤离的实施情况",
                    "人员伤亡的情况",
                    "冲出/偏出跑道的位置、轨迹、距离",
                    "事件的影响因素",
                    "如发生在落地期间：进近程序和航空器接地位置"
                ],
                explanation: "发生航空器冲/偏出跑道；发现有航空器冲出、偏出跑道的痕迹。落地后掉头或者起飞前掉头时撞到跑道边灯也属于该类事件。"
            },
            {
                id: "runway_incursion",
                name: "跑道侵入/占用",
                points: [
                    "涉及的航空器、车辆、人员信息",
                    "航空器和/或车辆的避让动作",
                    "计划、实际跑道/滑行道/线路",
                    "最小接近距离",
                    "能见度和跑道视程",
                    "跑道占用和/或侵入情况",
                    "事件发生的影响因素",
                    "使用跑道",
                    "机组处置情况（程序、通报管制情况）"
                ],
                explanation: "跑道侵入是指在机场发生的任何航空器、车辆或人员错误的出现在指定用于航空器着陆和起飞的地面保护区的情况。跑道占用是指管制员发布起飞着陆许可时，航空器、车辆、人员、物体等存在于跑道上的情况。由于前机超出空中交通管制（ATC）正常预期占用跑道（例如：突发机械故障、脱离动作慢、起飞离地晚）导致后机中断着陆或进近的情形不归为\"跑道占用\"。"
            },
            {
                id: "runway_off_touchdown",
                name: "跑道外接地",
                points: [
                    "接地位置",
                    "航空器姿态",
                    "接地后运动轨迹",
                    "机组在位、把杆情况",
                    "接地速度",
                    "使用跑道",
                    "使用的进近程序",
                    "油门工作状态",
                    "使用拖车或自主滑回"
                ],
                explanation: "跑道区域附近，在跑道外接地的任何事件；发现有航空器跑道外接地的痕迹；不包括机场外紧急着陆事件。"
            },
            {
                id: "runway_confusion",
                name: "跑道混淆",
                points: [
                    "指令跑道编号",
                    "机组在位、把杆情况",
                    "跑道混淆的外部影响因素（如：低云、低能见、夜间运行、降水等）",
                    "机组处置情况（如：复飞、中止进近、落错跑道）",
                    "空管处置情况（如：指挥复飞、指挥其他飞机避让等）",
                    "通信、导航设备工作情况"
                ],
                explanation: "航空器在滑行道、关闭或未指定的跑道上起飞、中断起飞、着陆或尝试着陆，或认错跑道（跑道方向）导致中止进近/复飞。认错、落错机场的情况也归于此类。"
            },
            {
                id: "discontinued_approach",
                name: "中止进近/复飞",
                points: [
                    "使用跑道、进近方式",
                    "中止进近和复飞时的高度（无线电高度）",
                    "中止进近/复飞原因",
                    "造成的影响",
                    "机组处置情况（有无衍生超限事件）",
                    "通报管制的内容和复飞原因",
                    "是否照成冲突和影响"
                ],
                explanation: "接地后复飞或复飞中接地；除低能见度、大风、乱流、雷雨等天气原因，机场关闭、宵禁和旅客自身原因外，机场标高300m以下的中止进近、复飞。"
            },
            {
                id: "return_alternate",
                name: "返航/备降",
                points: [
                    "返航/备降的原因",
                    "是否通报AOC",
                    "实际落地地点"
                ],
                explanation: "除低能见度、大风、乱流、雷雨等天气原因，机场关闭、宵禁和旅客自身原因外，返航、备降。"
            },
            {
                id: "forced_landing",
                name: "迫降/紧急着陆",
                points: [
                    "迫降原因",
                    "实际落地地点",
                    "机组处置情况",
                    "现场应急处置情况"
                ],
                explanation: "航空器因故不能以符合运行标准（含常规或授权偏离）的方式实施降落。"
            },
            {
                id: "unapproved_operation",
                name: "未经许可/低于标准起飞/着陆",
                points: [
                    "违规情况",
                    "事件的外部影响因素（如：低云、低能见、夜间运行、降水等）",
                    "机组处置情况",
                    "空管处置情况（是否造成冲突或其他航空器避让）"
                ],
                explanation: "未得到许可起飞或着陆；低于运行标准起飞、开始最后进近或着陆；航空器不符合放行条件放行或未执行放行工作起飞。"
            },
            {
                id: "wrong_procedure",
                name: "飞偏/飞错进离场程序",
                points: [
                    "指令的进离场程序",
                    "实际的进离场程序",
                    "飞错的情况（包括管制指令、机组复诵以及管制回复情况）",
                    "机组分工情况",
                    "机组简令情况（是否执行简令和进离场交叉检查）",
                    "空管处置情况（是否造成冲突或其他航空器避让）",
                    "对其他航空器安全运行的影响"
                ],
                explanation: "飞偏或飞错进离场航线，并导致其他航空器避让；偏离指定进离场航线5km或2倍RNP值以上；未正确执行复飞程序。以发现偏离后管制与机组之间建立联系时的最大偏离距离为准。"
            },
            {
                id: "incorrect_configuration",
                name: "未完成预定构型",
                points: [
                    "预定的构型",
                    "实际的构型（和预定构型的偏差）",
                    "机组处置情况"
                ],
                explanation: "航空器安定面配平超出起飞允许的范围、航空器未按性能计算结果而设定的起飞构型继续起飞；飞行中未完成预定的航空器构型（如起落架或起落架舱门、襟翼、缝翼等不能正常收放）；航空器进近期间起落架未放到位，高度下降到机场标高100米以下。"
            },
            {
                id: "performance_degradation",
                name: "未达到预定性能",
                points: [
                    "预定的性能",
                    "实际的性能（和预定构型的偏差）",
                    "机组处置情况"
                ],
                explanation: "在起飞、初始爬升或复飞过程中明显未达到预定性能。"
            },
            {
                id: "tire_failure",
                name: "爆胎/轮胎脱层/扎破",
                points: [
                    "使用跑道",
                    "发现阶段",
                    "损伤情况",
                    "机组发现、发管制通知或ECAM程序",
                    "轮胎扎伤事件中残留物名称、材质、尺寸（如能获取）",
                    "跑道/滑行道检查情况",
                    "爆胎后机组处置情况",
                    "后续航空器进位方式（自主滑行或拖行进位）"
                ],
                explanation: "航空器轮胎爆破、脱层或扎破处遗留外来物"
            },
            {
                id: "system_failure",
                name: "系统失效/故障/卡阻",
                points: [
                    "系统类型",
                    "失效部件及程度",
                    "机组处置情况"
                ],
                explanation: "航空器系统或组件失效或发生故障，需改变高度、速度、造成中止进近、复飞、返航、备降、占用跑道、需机场启动应急救援响应程序或需在最近合适机场着陆。"
            },
            {
                id: "component_failure",
                name: "零部件缺失/损坏/磨损",
                points: [
                    "部件名称",
                    "部件受损情况",
                    "机组应急处置情况",
                    "机组发现方式和阶段",
                    "机组是否通报管制单位以及内容"
                ],
                explanation: "航空器零部件脱落、未安装、损坏、磨损，包括飞行中航空器操纵面、发动机整流罩、舱门或风挡玻璃脱落，蒙皮揭起或张线断裂等。"
            },
            {
                id: "engine_stop",
                name: "发动机停车",
                points: [
                    "事发阶段",
                    "飞行高度",
                    "飞行速度",
                    "发动机参数",
                    "告警信息",
                    "自动停车还是人工关车",
                    "机组处置情况",
                    "备降或落地机场"
                ],
                explanation: "发动机停车或需要关停的情况；非包容性涡轮发动机失效。"
            },
            {
                id: "other_engine_event",
                name: "其他发动机相关事件",
                points: [
                    "事发阶段",
                    "对航空器运行造成的影响",
                    "机组处置情况（是否执行单发程序、是否涉及飘降程序）",
                    "灭火瓶使用/释放情况"
                ],
                explanation: "发动机起火或出现火警；下列任一部件的失效或故障：螺旋桨、旋翼、螺旋桨/主旋翼传动系统（齿轮箱、传动装置）、反推装置和动力装置控制系统；飞行中反推打开（正常使用除外）；发动机排气温度、振动值等超限。"
            },
            {
                id: "fire_smoke",
                name: "航空器(内)起火/冒烟/火警",
                points: [
                    "起火/冒烟位置",
                    "起火/冒烟原因（如能判断）",
                    "火警持续时间",
                    "机组处置情况",
                    "是否有明火",
                    "灭火瓶使用/释放情况"
                ],
                explanation: "航空器（内）起火、冒烟或出现火警、烟雾警告（因刹车引起的轮毂冒烟和烤箱内食物冒烟除外）。"
            },
            {
                id: "evacuation",
                name: "撤离",
                points: [
                    "撤离原因",
                    "撤离启动过程",
                    "撤离过程使用的舱门",
                    "撤离的位置（机坪、滑行道或跑道）",
                    "对其他航班运行影响",
                    "未正常工作的应急设备",
                    "机组工作情况",
                    "机长是否完成下机前检查",
                    "是否有人员伤亡"
                ],
                explanation: "陆地撤离及水上迫降后实施的撤离。"
            },
            {
                id: "ground_collision",
                name: "航空器地面碰撞",
                points: [
                    "航空器撞击部位",
                    "事发运行阶段",
                    "天气和能见度",
                    "障碍物情况",
                    "事件发生航空器工作状态（含发动机运转状态）",
                    "涉事人员、车辆、设备、设施具体信息",
                    "滑行线路",
                    "刹车工作情况",
                    "机场相关标志、标识",
                    "人员伤亡情况、航空器受损情况"
                ],
                explanation: "航空器在地面与航空器、设施设备、车辆、人员、动物或其他物体碰撞。"
            },
            {
                id: "dangerous_goods",
                name: "物品运输",
                points: [
                    "物品类型",
                    "所运输物品存在的问题",
                    "对安全运行的影响",
                    "应急处置情况",
                    "出现问题运行阶段",
                    "灭火瓶使用/释放情况"
                ],
                explanation: "载运的物品因泄漏等情况导致航空器损伤或人员受伤。机位安全线或等效安全区内机舱外起火或冒烟。"
            },
            {
                id: "weight_balance",
                name: "配载/装载",
                points: [
                    "计划配载情况",
                    "实际装载情况",
                    "舱单确认形式和情况（EFB或ACAS、是否完成确认或修正）",
                    "是否超过航空器包线范围",
                    "装载错误的货物、行李的具体数量、重量和位置",
                    "对安全运行的影响",
                    "机组分工情况、舱单输入是否完成交叉检查（如适用）",
                    "机组处置情况"
                ],
                explanation: "由于乘员、行李、邮件、货物、压舱物等的重量、装载位置与固定等原因，导致超过最后一分钟修正限值或超出重心限制，航空器起飞。航空器内货物、邮件、行李、集装器等与航空器碰撞也归为此类"
            },
            {
                id: "unintended_movement",
                name: "非正常位移",
                points: [
                    "航空器位移量（距离、角度等）",
                    "航空器停放固定情况（刹车、轮档）",
                    "相关天气情况（大风、台风等）"
                ],
                explanation: "静止状态的航空器发生非正常位移"
            },
            {
                id: "wrong_fuel",
                name: "加错油",
                points: [
                    "加错的型号或油量",
                    "后续是否启动发动机",
                    "后续处理情况"
                ],
                explanation: "加注不合格或错误型号的燃油/滑油/液压油，或加注燃油量错误对航空器安全运行造成影响"
            },
            {
                id: "fuel_spill",
                name: "油泄漏/溢出",
                points: [
                    "油液泄漏情况",
                    "泄漏面积（如可能，请判断污染面积是否超过5平方米）",
                    "后续机组处置情况",
                    "机场相关响应措施（如消防）"
                ],
                explanation: "燃油泄漏，污染机坪面积超过5㎡；在滑行或飞行中，燃油、滑油或液压油渗漏。以航空器燃油停止泄漏时的过油面积为准。"
            },
            {
                id: "ground_loss_control",
                name: "航空器地面失控",
                points: [
                    "失控的过程",
                    "失控的原因",
                    "应急处置措施",
                    "失控过程中可能涉及的人员"
                ],
                explanation: "因污染跑道或滑行道、系统失效、跑道侵入、避让动物等而导致的航空器地面失控情况；"
            },
            {
                id: "taxi_error",
                name: "偏出/滑错滑行道",
                points: [
                    "指令滑行路线",
                    "实际滑行路线",
                    "机组处置情况",
                    "空管处置情况",
                    "对其他航空器造成的影响",
                    "是否使用推车"
                ],
                explanation: "航空器滑行时偏出滑行道，以及滑错滑行道需要使用牵引设备重新回到正确滑行路线。滑行道包括航空器机位滑行通道、机坪滑行道、快速出口滑行道。不包含航空器越过机位停止线使用牵引设备的情况"
            },
            {
                id: "unauthorized_movement",
                name: "未经许可推出/滑行",
                points: [
                    "违反指令的原因",
                    "事件发生的影响因素",
                    "对安全运行的影响",
                    "机组和/或管制的应急处置"
                ],
                explanation: "未得到管制许可推出、起动或滑行"
            },
            {
                id: "slide_deployment",
                name: "滑梯放出/滑梯包脱落/应急出口",
                points: [
                    "放出滑梯的人员",
                    "放出过程",
                    "对安全运行的影响",
                    "应急处置措施"
                ],
                explanation: "因机组、机务、旅客、机械等原因，导致滑梯放出/滑梯包脱落或应急出口非正常打开"
            },
            {
                id: "elt_trigger",
                name: "ELT触发",
                points: [
                    "触发ELT的人员",
                    "触发时间和过程",
                    "对安全运行的影响"
                ],
                explanation: "机载应急定位发射机（ELT）非正常触发"
            },
            {
                id: "animal_strike",
                name: "动物撞击",
                points: [
                    "撞击动物种类",
                    "撞击发生的区域（跑道、滑行道等）",
                    "航空器损伤情况",
                    "机组的处置",
                    "能证明是动物撞击的证据（如有）"
                ],
                explanation: "与鸟击事件区分开，指在机场跑道或机场活动区发生的动物撞击"
            },
            {
                id: "obstruction",
                name: "超高障碍物/升空物体",
                points: [
                    "障碍物、升空物体位置、高度",
                    "应急处置情况",
                    "对安全运行的影响"
                ],
                explanation: "遭遇无人机、风筝等升空物体导致航空器避让。在机场净空保护区域内，出现超出机场障碍物限制面或影响航空器安全运行的建（构）筑物，或者出现影响航空器安全运行的升空物体。"
            },
            {
                id: "fo",
                name: "发现外来物",
                points: [
                    "外来物具体信息",
                    "外来物出现的位置",
                    "机组和管制的处置"
                ],
                explanation: "机场活动区内发现航空器掉落的零部件，或在滑行道/跑道发现外来物。"
            },
            {
                id: "facility_failure",
                name: "设备设施故障",
                points: [
                    "故障设备设施名称",
                    "故障类型",
                    "对航空器安全运行的影响",
                    "机组处置情况"
                ],
                explanation: "机场供电、目视助航设施（助航灯光、标记牌、风斗、障碍灯等）全部或部分失效或运行不正常，影响航空器安全运行；机场通信、导航、雷达、气象等设备发生故障、工作不正常、备份电源失效和其他变动情况，影响航空器安全运行；机场活动区保障设施故障、设备故障或操作不当，影响航空器安全运行或人员伤亡。"
            },
            {
                id: "facility_fire",
                name: "设备设施失火",
                points: [
                    "失火位置",
                    "失火的设备设施",
                    "火情",
                    "对运行的影响",
                    "应急处理情况"
                ],
                explanation: "地面设施、设备等失火/冒烟影响航空器安全运行"
            },
            {
                id: "radio_interference",
                name: "无线电干扰",
                points: [
                    "干扰出现的时间、持续的时间、地点和现象",
                    "对航班造成的影响",
                    "处置措施"
                ],
                explanation: "无线电干扰影响航空器安全运行。"
            },
            {
                id: "meteorology",
                name: "航空气象",
                points: [
                    "航行情报的内容",
                    "对安全运行的影响",
                    "机组应急处置"
                ],
                explanation: "航空气象服务原因影响航空器安全运行"
            },
            {
                id: "flight_info",
                name: "航行情报",
                points: [
                    "航空气象的内容",
                    "对安全运行的影响",
                    "机组应急处置"
                ],
                explanation: "航行情报服务原因影响航空器安全运行"
            },
            {
                id: "aircraft_icing",
                name: "航空器结冰",
                points: [
                    "积冰程度",
                    "飞行高度",
                    "对航空器系统、性能、机组操纵等的影响",
                    "气象预报信息"
                ],
                explanation: "由于冰、冻雨、雪或霜在航空器表面积累，给航空器操纵和性能造成不利影响的事件。"
            },
            {
                id: "turbulence",
                name: "空中颠簸",
                points: [
                    "飞行高度",
                    "颠簸严重程度",
                    "飞行高度、速度和姿态变化的情况",
                    "航空器受损情况",
                    "人员受伤情况",
                    "机组绕飞雷雨情况",
                    "安全带灯状态",
                    "气象雷达工作情况"
                ],
                explanation: "飞行中遭遇颠簸导致航空器损伤或人员受伤，或者造成航空器偏离高度60米以上。颠簸造成高度偏离也归在\"偏离姿态/高度\"类。"
            },
            {
                id: "wind_shear",
                name: "风切变/预测型风切变",
                points: [
                    "飞行高度",
                    "警告类型、等级、持续时间",
                    "风向风速变化情况",
                    "天气情况",
                    "机组处置情况"
                ],
                explanation: "飞行中，航空器遭遇风切变或触发风切变或预测型风切变警告。"
            },
            {
                id: "lightning",
                name: "雷击/电击",
                points: [
                    "雷击/电击部位",
                    "航空器参数变化情况",
                    "航空器损伤情况",
                    "天气情况",
                    "天气预报情况",
                    "机组绕飞雷雨情况",
                    "机组处置情况",
                    "气象雷达工作情况"
                ],
                explanation: "航空器遭雷击、电击，导致航空器损伤"
            },
            {
                id: "hail_ice",
                name: "雹击/冰击",
                points: [
                    "天气情况",
                    "雹击/冰击部位",
                    "航空器损伤情况",
                    "机组绕飞雷雨情况",
                    "机组处置情况"
                ],
                explanation: "航空器遭遇冰击/雹击，有对应的天气现象或残留冰渣等，导致航空器损伤"
            },
            {
                id: "dust_ash",
                name: "沙尘/火山灰",
                points: [
                    "沙尘/火山灰情况",
                    "造成的运行影响",
                    "航空器损伤情况",
                    "机组处置情况"
                ],
                explanation: "由于沙尘或火山灰等在航空器表面或动力装置积累，给航空器操纵和性能造成不利影响"
            }
        ];

        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            initEventTypeDropdown();
            setCurrentDateTime();
        });
        
        // 设置当前日期时间
        function setCurrentDateTime() {
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('eventTime').value = now.toISOString().slice(0, 16);
        }
        
        // 初始化事件类型下拉框
        function initEventTypeDropdown() {
            const eventTypeSelect = document.getElementById('eventType');
            
            // 添加事件类型选项（65种）
            eventTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type.id;
                option.textContent = type.name;
                eventTypeSelect.appendChild(option);
            });
        }
        
        // 显示事件类型的填写指南
        function showEventGuidance() {
            const eventTypeSelect = document.getElementById('eventType');
            const selectedId = eventTypeSelect.value;
            const guidanceBox = document.getElementById('eventGuidance');
            
            if (!selectedId) {
                guidanceBox.innerHTML = '<p style="text-align: center; color: #666;">请选择事件类型查看填写指南</p>';
                return;
            }
            
            const eventType = eventTypes.find(t => t.id === selectedId);
            
            if (!eventType) {
                guidanceBox.innerHTML = '<p style="text-align: center; color: #dc3545;">无法获取该事件类型的指南</p>';
                return;
            }
            
            let html = `
                <div class="points-title">
                    📋 ${eventType.name}填写要点:
                </div>
                <ul class="points-list">`;
            
            eventType.points.forEach(point => {
                html += `<li>${point}</li>`;
            });
            
            html += `</ul>`;
            
            if (eventType.explanation) {
                html += `
                    <div class="points-title">
                        🔍 释义和说明:
                    </div>
                    <div class="explanation">
                        ${eventType.explanation}
                    </div>`;
            }
            
            guidanceBox.innerHTML = html;
            
            // 滚动到指南区域
            guidanceBox.scrollIntoView({behavior: 'smooth', block: 'nearest'});
        }
        
        // 生成报告
        function generateReport() {
            // 获取所有表单值
            const urgency = document.getElementById('urgency').value || '未填写';
            const eventTime = document.getElementById('eventTime').value || '未填写';
            const flightNumber = document.getElementById('flightNumber').value || '未填写';
            const aircraftModel = document.getElementById('aircraftModel').value || '未填写';
            const aircraftReg = document.getElementById('aircraftReg').value || '未填写';
            const departure = document.getElementById('departure').value || '未填写';
            const arrival = document.getElementById('arrival').value || '未填写';
            const leftseat = document.getElementById('leftseat').value || '未填写';
            const rightseat = document.getElementById('rightseat').value || '未填写';
            const third = document.getElementById('third').value || '未填写';
            const fourth = document.getElementById('fourth').value || '未填写';
            const pic = document.getElementById('pic').value || '未填写';
            const eventType = document.getElementById('eventType');
            const eventTypeName = eventType.options[eventType.selectedIndex]?.text || '未选择';
            const eventDetails = document.getElementById('eventDetails').value || '未填写';
            const leader = document.getElementById('leader').value || '未填写';
            const sqms = document.getElementById('sqms').value || '未填写';
            
            // 构建报告内容
            const report = `
紧急程度: ${urgency}
事发时间: ${formatDateTime(eventTime)}
航班号: ${flightNumber}
机型: ${aircraftModel}
机号: ${aircraftReg}
起降地: ${departure} -> ${arrival}
左座PF/PM: ${leftseat}
右座PF/PM: ${rightseat}
第三成员: ${third || "无"}
第四成员: ${fourth || "无"}
责任机长: ${pic}
事件类型: ${eventTypeName}
事件描述:
${eventDetails}

是否汇报干部: ${leader}
是否填报SQMS: ${sqms}
`;
            
            document.getElementById('reportOutput').textContent = report;
            document.getElementById('form-container').classList.add('hidden');
            document.getElementById('report-container').classList.remove('hidden');
            window.scrollTo(0, 0);
        }
        
        // 转换日期时间格式
        function formatDateTime(dtStr) {
            if (!dtStr) return "未填写";
            const dt = new Date(dtStr);
            return `${dt.getFullYear()}-${(dt.getMonth()+1).toString().padStart(2, '0')}-${dt.getDate().toString().padStart(2, '0')} ${dt.getHours().toString().padStart(2, '0')}:${dt.getMinutes().toString().padStart(2, '0')}`;
        }
        
        // 复制到剪贴板
        function copyToClipboard() {
            const report = document.getElementById('reportOutput').textContent;
            
            navigator.clipboard.writeText(report).then(() => {
                showToast('报告已复制成功，请粘贴到微信');
            }).catch(err => {
                // 兼容方案
                const textArea = document.createElement('textarea');
                textArea.value = report;
                document.body.appendChild(textArea);
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    showToast('报告已复制，请粘贴');
                } catch (copyErr) {
                    showToast('复制失败，请手动选择文本');
                }
                
                document.body.removeChild(textArea);
            });
        }
        
        // 清空表单
        function clearForm() {
            document.getElementById('urgency').value = '非紧急';
            document.getElementById('flightNumber').value = '';
            document.getElementById('aircraftModel').value = '';
            document.getElementById('aircraftReg').value = '';
            document.getElementById('departure').value = '';
            document.getElementById('arrival').value = '';
            document.getElementById('leftseat').value = '';
            document.getElementById('rightseat').value = '';
            document.getElementById('third').value = '';
            document.getElementById('fourth').value = '';
            document.getElementById('pic').value = '';
            document.getElementById('eventDetails').value = '';
            document.getElementById('leader').value = '稍后汇报'; 
            document.getElementById('sqms').value = '稍后填报';
            
            setCurrentDateTime();
            
            const guidanceBox = document.getElementById('eventGuidance');
            guidanceBox.innerHTML = '<p style="text-align: center; color: #666;">请选择事件类型查看填写要点</p>';
            
            showToast('表单已清空');
        }
        
        // 返回表单
        function backToForm() {
            document.getElementById('report-container').classList.add('hidden');
            document.getElementById('form-container').classList.remove('hidden');
            window.scrollTo(0, 0);
        }
        
        // 显示提示消息
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 2800);
        }
    </script>
    <script>
        // 注册service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then((registration) => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch((error) => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>
